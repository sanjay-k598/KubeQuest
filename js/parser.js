(function(){const trim=s=>(s||'').trim();const toks=s=>s.trim().split(/\s+/);function parse(input){input=trim(input);if(!input)return{cmd:'noop'};if(input==='help')return{cmd:'help'};if(/^clear$|^cls$/.test(input))return{cmd:'clear'};if(!/^kubectl\b/.test(input))return{cmd:'text',text:"Command must start with 'kubectl'."};const parts=toks(input);const sub=parts[1];if(sub==='get'){const res=parts[2]||'';return{cmd:'get',res,flags:parts.slice(3)}}if(sub==='describe'){return{cmd:'describe',res:parts[2]||'',name:parts[3]||''}}if(sub==='logs'){return{cmd:'logs',name:parts[2]||''}}if(sub==='set'&&parts[2]==='image'){const target=parts[3]||'';const kv=parts[4]||'';const [container,image]=kv.split('=');return{cmd:'setimage',target,container,image}}if(sub==='rollout'){return{cmd:'rollout',action:parts[2],target:parts[3]}}if(sub==='scale'){const target=parts[2];const rep=parts.find(p=>p.startsWith('--replicas='))||'';return{cmd:'scale',target,replicas:parseInt(rep.split('=')[1]||'NaN',10)}}if(sub==='patch'){const target=parts[2];const pIdx=input.indexOf("-p");const json=pIdx>-1?input.slice(pIdx).split(/['"]/).filter(Boolean).pop() :"";return{cmd:'patch',target,json}}return{cmd:'text',text:'Unsupported subcommand in this demo.'}}window.CMD_PARSER={parse};})();